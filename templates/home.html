<!DOCTYPE html>
<html>
<head>
    <title>GreenSpace - Home</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <style>
    .list-group-item.active, .btn-primary {
        background-color: green;
        border-color: green;
    }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3 p-3">
                <h1>GreenSpace</h1>
                <img src="https://www.pngplay.com/wp-content/uploads/6/Community-Logo-Background-PNG-Image.png" alt="Greenspace Logo" style="width:50%; height:auto;">
                <div class="list-group">
                    <a href="/home" class="list-group-item list-group-item-action active">Home</a>
                    <a href="/community" class="list-group-item list-group-item-action">My Community</a>
                    <a href="/messages" class="list-group-item list-group-item-action">Messages</a>
                    <a href="/notifications" class="list-group-item list-group-item-action">Notifications</a>
                    <a href="/profile" class="list-group-item list-group-item-action">Profile</a>
                    <a href="/calendar" class="list-group-item list-group-item-action">Calendar</a>
                    <a href="/settings" class="list-group-item list-group-item-action">Settings</a>
                    <a href="/logout" class="list-group-item list-group-item-action">Logout</a>
                </div>
                

                <div class="recommendations mt-4">
                    <h3>Club and Organization Recommendations</h3>
                    <div class="row">
                        <div class="col-md-6">
                            <ul class="list-group">
                                <!-- Add club and organization recommendations here -->
                                <li class="list-group-item" id="golf_club_li">
                                    <a href="/golf_club">Golf Club</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right ml-1" id="golf_club_not_interested" onclick="processClub('golf_club', false)">Not Interested</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right" id="golf_club_join" onclick="processClub('golf_club', true)">Join</a>
                                </li>
                                <li class="list-group-item" id="surf_club_li">
                                    <a href="/surf_club">Surf Club</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right ml-1" id="surf_club_not_interested" onclick="processClub('surf_club', false)">Not Interested</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right" id="surf_club_join" onclick="processClub('surf_club', true)">Join</a>
                                </li>
                                <li class="list-group-item" id="latinx_club_li">
                                    <a href="/latinx_club">Latinx Club</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right ml-1" id="latinx_club_not_interested" onclick="processClub('latinx_club', false)">Not Interested</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right" id="latinx_club_join" onclick="processClub('latinx_club', true)">Join</a>
                                </li>
                                <li class="list-group-item" id="african_american_club_li">
                                    <a href="/african_american_club">African American Club</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right ml-1" id="african_american_club_not_interested" onclick="processClub('african_american_club', false)">Not Interested</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right" id="african_american_club_join" onclick="processClub('african_american_club', true)">Join</a>
                                </li>
                                <!-- Add more club and organization recommendations here -->
                                <li class="list-group-item" id="chess_club_li">
                                    <a href="/chess_club">Chess Club</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right ml-1" id="chess_club_not_interested" onclick="processClub('chess_club', false)">Not Interested</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right" id="chess_club_join" onclick="processClub('chess_club', true)">Join</a>
                                </li>
                                <li class="list-group-item" id="photography_club_li">
                                    <a href="/photography_club">Photography Club</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right ml-1" id="photography_club_not_interested" onclick="processClub('photography_club', false)">Not Interested</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right" id="photography_club_join" onclick="processClub('photography_club', true)">Join</a>
                                </li>
                                <li class="list-group-item" id="drama_club_li">
                                    <a href="/drama_club">Drama Club</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right ml-1" id="drama_club_not_interested" onclick="processClub('drama_club', false)">Not Interested</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right" id="drama_club_join" onclick="processClub('drama_club', true)">Join</a>
                                </li>
                                <li class="list-group-item" id="music_club_li">
                                    <a href="/music_club">Music Club</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right ml-1" id="music_club_not_interested" onclick="processClub('music_club', false)">Not Interested</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right" id="music_club_join" onclick="processClub('music_club', true)">Join</a>
                                </li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <ul class="list-group">
                                <!-- Add more club and organization recommendations here -->
                                <li class="list-group-item" id="robotics_club_li">
                                    <a href="/robotics_club">Robotics Club</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right ml-1" id="robotics_club_not_interested" onclick="processClub('robotics_club', false)">Not Interested</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right" id="robotics_club_join" onclick="processClub('robotics_club', true)">Join</a>
                                </li>
                                <li class="list-group-item" id="debate_club_li">
                                    <a href="/debate_club">Debate Club</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right ml-1" id="debate_club_not_interested" onclick="processClub('debate_club', false)">Not Interested</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right" id="debate_club_join" onclick="processClub('debate_club', true)">Join</a>
                                </li>
                                <li class="list-group-item" id="volunteering_club_li">
                                    <a href="/volunteering_club">Volunteering Club</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right ml-1" id="volunteering_club_not_interested" onclick="processClub('volunteering_club', false)">Not Interested</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right" id="volunteering_club_join" onclick="processClub('volunteering_club', true)">Join</a>
                                </li>
                                <li class="list-group-item" id="programming_club_li">
                                    <a href="/programming_club">Programming Club</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right ml-1" id="programming_club_not_interested" onclick="processClub('programming_club', false)">Not Interested</a> 
                                    <a href="#" class="btn btn-primary btn-sm float-right" id="programming_club_join" onclick="processClub('programming_club', true)">Join</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6 p-3">
                <div class="card">
                    <div class="card-header d-flex justify-content-between">
                        <h2>Hi, {{ user.name }}!</h2>
                        <form class="form-inline my-2 my-lg-0">
                            <input class="form-control mr-sm-2" type="search" placeholder="Search..." aria-label="Search">
                            <button class="btn btn-primary my-2 my-sm-0" type="submit">Search</button>
                        </form>
                    </div>
                    <div class="card-body">
                        <div class="post">
                            <form id="post_form">
                                <div class="form-group">
                                    <textarea class="form-control" id="post_content" placeholder="Start a post..." rows="3"></textarea>
                                </div>
                                <div class="form-group">
                                    <button type="button" class="btn btn-primary" id="start_live_video">Start a Live Video</button>
                                </div>
                                <div class="form-group">
                                    <label for="video_upload">Upload Video:</label>
                                    <input type="file" class="form-control-file" name="video" id="video_upload">
                                </div>
                                <div class="form-group">
                                    <label for="image_upload">Upload Image:</label>
                                    <input type="file" class="form-control-file" name="photo" id="image_upload">
                                </div>
                                <button type="submit" class="btn btn-primary">Post</button>
                            </form>
                        </div>



                        <div class="feed mt-4">
                            <!-- User's posts go here -->
                            {% for club in user.joined_clubs %}
                                {% if club == 'golf_club' %}
                                    {% for post in golf_club_posts %}
                                        <div class="card">
                                            <div class="card-body">
                                                <h5 class="card-title">{{ post.author }}</h5>
                                                <p class="card-text">{{ post.content }}</p>
                                            </div>
                                        </div>
                                    {% endfor %}
                                {% elif club == 'surf_club' %}
                                    {% for post in surf_club_posts %}
                                        <div class="card">
                                            <div class="card-body">
                                                <h5 class="card-title">{{ post.author }}</h5>
                                                <p class="card-text">{{ post.content }}</p>
                                            </div>
                                        </div>
                                    {% endfor %}
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-3 p-3">
                <div class="card">
                    <div class="card-header">
                        <h3>Upcoming Events</h3>
                    </div>
                    <div class="card-body">
                        <div class="list-group">
                            <a href="#" class="list-group-item list-group-item-action">
                                <h5 class="mb-1">ClubCentral Kickoff Party</h5>
                                <p class="mb-1">August 15, 2023</p>
                                <small>6:00 PM - 9:00 PM</small>
                            </a>
                            <a href="#" class="list-group-item list-group-item-action">
                                <h5 class="mb-1">Latinx Club Salsa Night</h5>
                                <p class="mb-1">August 20, 2023</p>
                                <small>7:00 PM - 11:00 PM</small>
                            </a>
                            <a href="#" class="list-group-item list-group-item-action">
                                <h5 class="mb-1">Golf Club Tournament</h5>
                                <p class="mb-1">August 25, 2023</p>
                                <small>8:00 AM - 2:00 PM</small>
                            </a>
                            <a href="#" class="list-group-item list-group-item-action">
                                <h5 class="mb-1">African American Club Movie Night</h5>
                                <p class="mb-1">September 5, 2023</p>
                                <small>6:30 PM - 9:00 PM</small>
                            </a>
                            <a href="#" class="list-group-item list-group-item-action">
                                <h5 class="mb-1">Surf Club Beach Bonanza</h5>
                                <p class="mb-1">September 10, 2023</p>
                                <small>12:00 PM - 4:00 PM</small>
                            </a>
                            <a href="#" class="list-group-item list-group-item-action">
                                <h5 class="mb-1">Latinx Club Language Exchange</h5>
                                <p class="mb-1">September 15, 2023</p>
                                <small>5:00 PM - 7:00 PM</small>
                            </a>
                            <a href="#" class="list-group-item list-group-item-action">
                                <h5 class="mb-1">African American Club Leadership Workshop</h5>
                                <p class="mb-1">September 20, 2023</p>
                                <small>4:30 PM - 6:30 PM</small>
                            </a>
                            <a href="#" class="list-group-item list-group-item-action">
                                <h5 class="mb-1">Golf Club Practice Session</h5>
                                <p class="mb-1">September 25, 2023</p>
                                <small>9:00 AM - 11:00 AM</small>
                            </a>
                            <a href="#" class="list-group-item list-group-item-action">
                                <h5 class="mb-1">Latinx Club Cultural Fiesta</h5>
                                <p class="mb-1">October 5, 2023</p>
                                <small>6:00 PM - 10:00 PM</small>
                            </a>
                            <a href="#" class="list-group-item list-group-item-action">
                                <h5 class="mb-1">African American Club Networking Event</h5>
                                <p class="mb-1">October 15, 2023</p>
                                <small>7:00 PM - 9:00 PM</small>
                            </a>
                            <!-- Add more events here -->
                            <a href="#" class="list-group-item list-group-item-action">
                                <h5 class="mb-1">Photography Club Exhibition</h5>
                                <p class="mb-1">October 20, 2023</p>
                                <small>5:00 PM - 8:00 PM</small>
                            </a>
                            <a href="#" class="list-group-item list-group-item-action">
                                <h5 class="mb-1">Debate Club Debate Tournament</h5>
                                <p class="mb-1">October 25, 2023</p>
                                <small>9:00 AM - 5:00 PM</small>
                            </a>
                            <a href="#" class="list-group-item list-group-item-action">
                                <h5 class="mb-1">Volunteering Club Cleanup Drive</h5>
                                <p class="mb-1">November 5, 2023</p>
                                <small>10:00 AM - 1:00 PM</small>
                            </a>
                            <a href="#" class="list-group-item list-group-item-action">
                                <h5 class="mb-1">Programming Club Hackathon</h5>
                                <p class="mb-1">November 15, 2023</p>
                                <small>10:00 AM - 6:00 PM</small>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>

        $(document).ready(function() {
            $('#post_form').on('submit', function(e) {
                e.preventDefault();

                var postContent = $('#post_content').val();
                if (postContent) {
                    $.post('/post', { content: postContent }, function(data) {
                        var newPost = '<div class="card">' +
                                        '<div class="card-body">' +
                                            '<h5 class="card-title">' + data.author + '</h5>' +
                                            '<p class="card-text">' + data.content + '</p>' +
                                            '<button type="button" class="btn btn-primary btn-sm like-btn">Like</button>' + +
                                            '<span class="like-count">' + data.likes + '</span> Likes' +
                                            '<div class="comments mt-2">' +
                                            '</div>' +
                                            '<form onsubmit="return false;">' +
                                                '<div class="form-group">' +
                                                    '<input type="text" class="form-control comment-input" placeholder="Add a comment...">' +
                                                '</div>' +
                                                '<button type="button" class="btn btn-primary btn-sm comment-btn">Comment</button>' +
                                            '</form>' +
                                        '</div>' +
                                    '</div>';
                        $('.feed').prepend(newPost);
                        $('#post_form')[0].reset();
                    });
                }
            });
            
            // Listen for click events on dynamically added like buttons
            $(document).on('click', '.like-btn', function() {
                var likeCountSpan = $(this).siblings('.like-count');
                var currentLikes = parseInt(likeCountSpan.text());

                if (!$(this).hasClass('liked')) {
                    var newLikes = currentLikes + 1;
                    likeCountSpan.text(newLikes);
                    $(this).addClass('liked');
                }
            });

            // Listen for click events on dynamically added comment buttons
            $(document).on('click', '.comment-btn', function() {
                var commentInput = $(this).siblings('.form-group').find('.comment-input');
                var commentContent = commentInput.val().trim();  // trim whitespace

                if (commentContent) {
                    var newComment = '<p><strong>User ' + (Math.floor(Math.random() * 10) + 1) + ':</strong> ' + commentContent + '</p>';

                    $(this).siblings('.comments').append(newComment);
                    commentInput.val('');
                }
            });

        });

        function processClub(clubId, join) {
            var clubElement = document.getElementById(clubId + '_li');
            clubElement.style.display = "none";

            var url = join ? '/join' : '/notInterested';
            $.post(url, { 'club_id': clubId }, function() {
                if (join) {
                    var joinedClubs = JSON.parse(localStorage.getItem('joinedClubs') || '[]');
                    joinedClubs.push(clubId);
                    localStorage.setItem('joinedClubs', JSON.stringify(joinedClubs));
                }
                alert('Successfully processed club!');
            });
        }
                $(document).ready(function() {
            $('#post_form').on('submit', function(e) {
                e.preventDefault();

                var postContent = $('#post_content').val();
                if (postContent) {
                    $.post('/post', { content: postContent }, function(data) {
                        var newPost = '<div class="card">' +
                                          '<div class="card-body">' +
                                              '<h5 class="card-title">' + data.author + '</h5>' +
                                              '<p class="card-text">' + data.content + '</p>' +
                                              '<button type="button" class="btn btn-primary btn-sm" onclick="likePost(\'' + data.id + '\')">Like</button>' +
                                              '<span id="' + data.id + '_like_count">' + data.likes + '</span> Likes' +
                                              '<div class="comments mt-2" id="' + data.id + '_comments">' +
                                              '</div>' +
                                              '<form onsubmit="return false;">' +
                                                  '<div class="form-group">' +
                                                      '<input type="text" class="form-control" placeholder="Add a comment..." id="' + data.id + '_comment_input">' +
                                                  '</div>' +
                                                  '<button type="button" class="btn btn-primary btn-sm" onclick="addComment(\'' + data.id + '\')">Comment</button>' +
                                              '</form>' +
                                          '</div>' +
                                      '</div>';
                        $('.feed').prepend(newPost);
                        $('#post_form')[0].reset();
                    });
                }
            });
        });

         // Function to generate random names for users
        function getRandomUserName() {
            var userNames = ['Alice', 'Bob', 'Charlie', 'David', 'Ella', 'Frank', 'Grace', 'Henry', 'Isabella', 'Jack'];
            return userNames[Math.floor(Math.random() * userNames.length)];
        }

        // Function to generate random post content for clubs
        function getRandomPostContent(club) {
            var clubPosts = [
                "We had an amazing day at the " + club + " today! The weather was perfect for our activities.",
                "Join us this weekend at the " + club + " for some exciting games and fun!",
                "Here's a sneak peek of our upcoming event at the " + club + ". Don't miss it!",
                "We're thrilled to announce a new partnership with a local business to support the " + club + " community.",
                "What a great time we had at the " + club + " gathering last night. Thanks to all who joined!",
                "Looking for new members to join our " + club + ". If you're interested, let us know!",
                "We're organizing a charity event at the " + club + ". Let's make a difference together!",
                "Check out this awesome picture from our recent " + club + " event!",
                "Need some motivation? Our " + club + " members are always there to support each other!",
                "Just sharing some useful tips for our fellow " + club + " enthusiasts. Enjoy!",
                "Let's get active and have some fun at the " + club + ". See you there!",
                "A big shoutout to our dedicated " + club + " team. You guys are amazing!",
                "We're excited to welcome new members to our " + club + " family. Join us today!",
                "Had a blast at the " + club + " tournament. Congratulations to all the winners!",
                "Looking forward to our upcoming " + club + " meetup. Save the date!",
                "Who's up for a friendly competition at the " + club + "? Let's challenge each other!",
                "Share your favorite " + club + " moments and memories with us. #memories",
                "Did you know? Our " + club + " is celebrating its 10th anniversary this month!",
                "Let's improve our skills together. Join our " + club + " workshop this weekend!",
                "We're passionate about what we do at the " + club + ". Come and be a part of it!",
            ];

            return clubPosts[Math.floor(Math.random() * clubPosts.length)];
        }
        // Function to shuffle an array using Fisher-Yates algorithm
        function shuffleArray(array) {
            for (var i = array.length - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                var temp = array[i];
                array[i] = array[j];
                array[j] = temp;
            }
        }
        // Helper function to generate random comment content
        function getRandomCommentContent(userName) {
            var commentTemplates = [
                'I totally agree with this!',
                'Wow, that sounds like a lot of fun!',
                'I wish I could have been there to witness that!',
                'Great post! Keep up the good work.',
                'Could you share more details about that?',
                'This is really interesting!',
                'I never thought about it that way.',
                'You have a unique perspective on this.',
                'Thanks for sharing!',
                'Keep it coming, I love reading your posts!',
                'Your posts always brighten my day!',
                'This post deserves more likes!',
                'I can relate to this on so many levels.',
                'You have a talent for expressing ideas.',
                'Mind if I share this with my friends?',
                'This deserves to go viral!',
                'Everyone should read this post!',
                'Your posts are always so thought-provoking.',
                'Thanks for bringing up this topic.',
                'This is why I love this community!',
                'Your posts are like a breath of fresh air.',
                'You never fail to impress me with your posts.',
                'Your insights are always on point!',
                'I appreciate the effort you put into your posts.',
                'Your posts make me see things from a new perspective.',
                'This is exactly what I needed to read today!',
                'You have a real talent for writing.',
                'Your posts are so relatable.',
                'I admire your dedication to this community.',
                'This post really made me think.',
                'Your posts always spark interesting discussions.',
                'I wish more people wrote like you.',
                'Your creativity knows no bounds!',
                'Thanks for adding value to our community!',
            ];
            return commentTemplates[Math.floor(Math.random() * commentTemplates.length)];
        }

        // Function to simulate random posts, comments, and likes
        function generateRandomData() {
            var clubs = ['Golf Club', 'Surf Club', 'Chess Club', 'Tennis Club', 'Book Club', 'Fitness Club'];
            shuffleArray(clubs);
            var posts = [];

            for (var i = 0; i < clubs.length; i++) {
                shuffleArray(clubs);
                var clubPosts = [];
                for (var j = 0; j < 5; j++) {
                    shuffleArray(clubs);
                    var postId = clubs[i] + '_post_' + j;
                    var post = {
                        id: postId,
                        author: getRandomUserName(),
                        content: getRandomPostContent(clubs[i]),
                        likes: Math.floor(Math.random() * 100),
                        comments: [],
                    };

                    // Generate random comments for each post
                    var numComments = Math.floor(Math.random() * 5);
                    for (var k = 0; k < numComments; k++) {
                        var commentId = postId + '_comment_' + k;
                        var commentAuthor = getRandomUserName();
                        var commentContent = getRandomCommentContent(commentAuthor);
                        var comment = {
                            id: commentId,
                            author: commentAuthor,
                            content: commentContent,
                        };
                        post.comments.push(comment);
                    }

                    clubPosts.push(post);
                }
                posts.push(clubPosts);
            }

            return posts;
        }

        // Function to add random posts to the feed
        function addRandomPostsToFeed() {
            var randomPosts = generateRandomData();

            for (var i = 0; i < randomPosts.length; i++) {
                var clubPosts = randomPosts[i];

                for (var j = 0; j < clubPosts.length; j++) {
                    var postId = clubPosts[j].id;
                    var newPost = '<div class="card">' +
                                    '<div class="card-body">' +
                                        '<h5 class="card-title">' + clubPosts[j].author + '</h5>' +
                                        '<p class="card-text">' + clubPosts[j].content + '</p>' +
                                        '<button type="button" class="btn btn-primary btn-sm" id="' + postId + '_like_btn" onclick="likePost(\'' + postId + '\')">Like</button>' +
                                        '<span id="' + postId + '_like_count">' + clubPosts[j].likes + '</span> Likes' +
                                        '<div class="comments mt-2" id="' + postId + '_comments">';

                    for (var k = 0; k < clubPosts[j].comments.length; k++) {
                        var commentId = clubPosts[j].comments[k].id;
                        var comment = '<p><strong>' + clubPosts[j].comments[k].author + ':</strong> ' + clubPosts[j].comments[k].content + '</p>';
                        newPost += comment;
                    }

                    newPost += '</div>' +
                                '<form onsubmit="return false;">' +
                                    '<div class="form-group">' +
                                        '<input type="text" class="form-control" placeholder="Add a comment..." id="' + postId + '_comment_input">' +
                                    '</div>' +
                                    '<button type="button" class="btn btn-primary btn-sm" onclick="addComment(\'' + postId + '\')">Comment</button>' +
                                '</form>' +
                            '</div>' +
                        '</div>';

                    $('.feed').prepend(newPost);
                }
            }
        }


        var likedPosts = [];

        // Function to increment likes count
        function likePost(postId) {
            if (likedPosts.includes(postId)) {
                alert("You've already liked this post.");
            } else {
                var likeElement = document.getElementById(postId + '_like_count');
                var currentLikes = parseInt(likeElement.innerText);
                likeElement.innerText = currentLikes + 1;
                likedPosts.push(postId);
            }
        }
        var user = {
            name: "You"
            // other properties...
        };        

        // Function to add a comment to a post
        function addComment(postId) {
            var commentInput = document.getElementById(postId + '_comment_input');
            var commentContent = commentInput.value;
            if(commentContent){
                var newComment = '<p><strong>' + user.name + ':</strong> ' + commentContent + '</p>';
                document.getElementById(postId + '_comments').innerHTML += newComment;
                commentInput.value = '';
            }
        }


        // Add random posts to the feed on page load
        addRandomPostsToFeed();
    </script>
    </script>
</body>
</html>
